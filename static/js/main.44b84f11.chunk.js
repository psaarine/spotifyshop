(this.webpackJsonpspotifyapp=this.webpackJsonpspotifyapp||[]).push([[0],{38:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),s=n(16),i=n.n(s),o=n(25),u=n(26),d=n(31),j=n(30),l=(n(38),n(13)),b=n(6),h=n.n(b),p=n(10),O=n(2),f="02267ba9be1248d5bb1a9624558143dc",m="09d64e7beca5447fb915e84f3bc545df",x=Object(c.createContext)(),v=function(e){var t=Object(c.useState)("tokeni"),n=Object(O.a)(t,2),r=n[0],s=n[1];return Object(a.jsx)(x.Provider,{value:[r,s],children:e.children})},g=Object(c.createContext)(),y=function(e){var t=Object(c.useState)([]),n=Object(O.a)(t,2),r=n[0],s=n[1],i=Object(c.useContext)(x)[1];return Object(c.useEffect)((function(){!function(){o.apply(this,arguments)}()}),[]),Object(a.jsx)(g.Provider,{value:r,children:e.children});function o(){return(o=Object(p.a)(h.a.mark((function e(){var t,n,a,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){return(r=Object(p.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.spotify.com/v1/browse/categories?locale=sv_FI&limit=5",{method:"GET",headers:{Authorization:"Bearer "+t}});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,console.log(),s(a.categories.items);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(e){return r.apply(this,arguments)},a=function(){return(a=Object(p.a)(h.a.mark((function e(){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(f+":"+m)},body:"grant_type=client_credentials"});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,t=a.access_token,sessionStorage.setItem("token",t),i(t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},n=function(){return a.apply(this,arguments)},e.next=6,n();case 6:c(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},k=n(7),w=function(e){var t={pathname:"/categories/".concat(e.category.id),state:e.category};return Object(a.jsxs)("div",{className:"category-card",children:[Object(a.jsx)(k.b,{to:t,children:Object(a.jsx)("img",{src:e.category.icons[0].url})}),Object(a.jsx)("h1",{children:e.category.name})]})},S=n(14);function N(){var e=Object(l.a)(["\n    background-image: url(",");\n    background-repeat: no-repeat;\n    background-position: center;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n"]);return N=function(){return e},e}var I=S.a.div(N(),(function(e){return e.url})),C=function(){var e=Object(c.useContext)(g);return Object(a.jsxs)(I,{children:[Object(a.jsx)("h1",{className:"header",children:"Categories"}),Object(a.jsx)("div",{className:"category-card-wrapper",children:e.map((function(e,t){return Object(a.jsx)(w,{category:e},t)}))})]})},E=Object(c.createContext)(),A=function(e){var t=Object(c.useState)({}),n=Object(O.a)(t,2),r=n[0];n[1];return Object(a.jsx)(E.Provider,{value:{Shop:r,addItem:function(e,t){var n=JSON.parse(sessionStorage.getItem("shop"));if(null===n){var a={};a[e.id]=[e],sessionStorage.setItem("shop",JSON.stringify(a)),t(1)}else if(e.id in n){var c=n[e.id];c.push(e),n[e.id]=c,sessionStorage.setItem("shop",JSON.stringify(n)),t(c.length)}else{var r=[e];n[e.id]=r,sessionStorage.setItem("shop",JSON.stringify(n)),t(1)}},resetShop:function(e){sessionStorage.removeItem("shop"),e(0)},removeItem:function(e,t){var n=JSON.parse(sessionStorage.getItem("shop"));if(null!==n&&e.id in n&&n[e.id].length>0){var a=n[e.id];a.pop(),n[e.id]=a,sessionStorage.setItem("shop",JSON.stringify(n)),t(a.length)}}},children:e.children})},J=n(3),P=function(e){Object(c.useContext)(g);var t=Object(c.useState)([]),n=Object(O.a)(t,2),r=n[0],s=n[1];Object(J.f)();return Object(c.useEffect)((function(){!function(){var e=JSON.parse(sessionStorage.getItem("shop"));null!==e&&void 0!==e&&s(Object.values(e))}()}),[]),Object(a.jsx)("div",{className:"shop",children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("div",{className:"shop-list",children:Object(a.jsx)("h1",{children:"Your items:"})}),r.map((function(e,t){return Object(a.jsx)(B,{data:e},t)}))]})})},B=function(e){return Object(a.jsx)("div",{className:"shop-list",children:void 0===e.data[0]?Object(a.jsx)("h1",{}):Object(a.jsxs)("h1",{children:[e.data[0].label,": ",e.data[0].name," x ",e.data.length]})})},R=function(e){return Object(a.jsx)(k.b,{to:"/shop",children:Object(a.jsx)("div",{className:"shop-link",children:Object(a.jsx)("p",{children:"Visit Shop"})})})};function z(){var e=Object(l.a)(["\n    width: 640px;\n    height: 700px;\n    position: absolute;\n    left: ","px;\n    scale: ",";\n    transition: 0.5s;\n"]);return z=function(){return e},e}var T=S.a.div(z(),(function(e){return 800*e.index+e.currentPosition+300}),(function(e){return e.active?1.2:1})),M=function(e){var t=Object(c.useState)(!1),n=Object(O.a)(t,2),r=n[0],s=n[1],i={pathname:"/playlists/"+e.data.id,state:{tracks:e.data.tracks,image:e.data.images[0].url}};return Object(a.jsxs)(T,{index:e.index,currentPosition:e.currentPosition,active:r,onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},children:[Object(a.jsx)("h1",{children:e.data.title}),Object(a.jsx)(k.b,{to:i,children:Object(a.jsx)("img",{src:e.data.images[0].url})}),Object(a.jsx)("p",{children:e.data.description})]})},_=function(e){var t=e.data.location.state,n=Object(c.useState)([]),r=Object(O.a)(n,2),s=r[0],i=r[1],o=Object(c.useReducer)((function(e,t){switch(t){case"increment":return e+1;case"decrement":return e-1}}),0),u=Object(O.a)(o,2),d=u[0],j=u[1];return Object(c.useEffect)((function(){!function(e,t){l.apply(this,arguments)}(t.id,i)}),[]),Object(a.jsx)("div",{className:"screen",children:Object(a.jsx)("div",{className:"playlist-card-wrapper",onWheel:function(e){return function(e,t,n,a){e.deltaY<0&&n<0&&t("increment");e.deltaY>0&&n<=0&&n>-1*a.length&&t("decrement")}(e,j,d,s)},children:s.map((function(e,t){return Object(a.jsx)(M,{data:e,index:t,currentPosition:600*d},t)}))})});function l(){return(l=Object(p.a)(h.a.mark((function e(t,n){var a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.spotify.com/v1/browse/categories/".concat(t,"/playlists?limit=5"),{method:"GET",headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});case 2:return a=e.sent,e.next=5,a.json();case 5:c=e.sent,n(c.playlists.items);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},L=n(0),Y=L.createContext,G=L.useState,F=Y(),U=function(e){var t=G({data:"kek"}),n=Object(O.a)(t,2),c=n[0],r=n[1],s=G(!1),i=Object(O.a)(s,2),o=i[0],u=i[1];return Object(a.jsx)(F.Provider,{value:[c,o,u,r],children:e.children})};function D(){var e=Object(l.a)(["\n    padding: 10px;\n    width: 400px;\n    height: 55px;\n    border-radius: 3px;\n    white-space: nowrap;\n    overflow: hidden;\n    transition: 1s;\n    text-align: center;\n    background-color: #2A1B3D;\n    margin: 10px;\n    scale: ",";\n    color: white;\n"]);return D=function(){return e},e}var H=S.a.div(D(),(function(e){return e.isActive?1.2:1})),V=function(e){var t=Object(c.useContext)(F),n=Object(c.useState)(""),r=Object(O.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(!1),u=Object(O.a)(o,2),d=u[0],j=u[1];return Object(c.useEffect)((function(){!function(e,t){var n=15,a=e.data.track.name;a.length>n&&(a=a.slice(0,n).concat("..."));t(a)}(e,i)}),[]),Object(a.jsx)(H,{isActive:d,onMouseEnter:function(){!function(t,n,a){a(!0);var c={image:e.data.track.album.images[1],name:e.data.track.name,duration:e.data.track.duration_ms,album:e.data.track.album.id};n(c),j(!0)}(t[1],t[3],t[2])},onMouseLeave:function(){j(!1)},children:Object(a.jsx)("h1",{className:"track-text",children:s})})},W=n(50),q=n(51);n(46);function K(){var e=Object(l.a)(["\n    transition: ","s;\n    margin-left: ","px;\n    opacity: ",";\n    display: inline-block;\n    text-align: center;\n    transform-style: preserve-3d;\n"]);return K=function(){return e},e}var Q=function(e){var t=Object(c.useContext)(F);return Object(a.jsx)(W.a,{mode:"out-in",children:Object(a.jsx)(q.a,{classNames:"fade",timeout:{appear:1e3,enter:1e3,exit:0},unmountOnExit:!0,children:Object(a.jsx)("div",{children:t[1]?Object(a.jsx)(X,{data:t}):Object(a.jsx)("h1",{})})},t[1])})},X=function(e){var t=Object(c.useState)(!1),n=Object(O.a)(t,2),r=(n[0],n[1]),s=Object(c.useState)(!1),i=Object(O.a)(s,2),o=i[0],u=i[1],d={pathname:"/album/"+e.data[0].album,state:{kek:"lol"}};return Object(c.useEffect)((function(){u(!1)}),[e.data]),Object(a.jsx)(Z,{isReady:o,isHovered:!1,children:Object(a.jsxs)("div",{className:"track-card",onMouseEnter:function(){r(!0)},children:[Object(a.jsx)("img",{src:e.data[0].image.url,onLoad:function(){!function(e){j.apply(this,arguments)}(u)},alt:""}),Object(a.jsx)("h3",{className:"track-card-front-name",children:e.data[0].name}),Object(a.jsx)(k.b,{to:d,children:Object(a.jsx)("h4",{children:"Browse"})}),Object(a.jsx)("div",{className:"track-card-front-viewers"})]})});function j(){return(j=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){t(!0)}),1e3);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},Z=S.a.div(K(),(function(e){return e.isReady?1:0}),(function(e){return e.isReady?0:600}),(function(e){return e.isReady?1:0}));function $(){var e=Object(l.a)(["\n    background-position: center;\n    background-repeat: no-repeat;\n    background-image: url(",");\n    height: 100vh;\n    width: 100vw;\n    position: absolute;\n    opacity: 0.5;\n    z-index: -1;\n"]);return $=function(){return e},e}var ee=S.a.div($(),(function(e){return e.url})),te=function(e,t){switch(t){case"increment":return e+1;case"decrement":return e-1;default:return e}},ne=function(e){var t=Object(c.useReducer)(te,1),n=Object(O.a)(t,2),r=(n[0],n[1],Object(c.useState)([])),s=Object(O.a)(r,2),i=s[0],o=s[1];return Object(c.useEffect)((function(){!function(e,t){u.apply(this,arguments)}(e.data.location.state.tracks.href,o)}),[]),Object(a.jsxs)("div",{className:"playlist-item",children:[Object(a.jsx)(ee,{url:e.data.location.state.image}),Object(a.jsxs)(U,{children:[Object(a.jsx)("div",{className:"track-wrapper",children:i.map((function(e,t){return Object(a.jsx)(V,{data:e,trackNumber:t})}))}),Object(a.jsx)("div",{className:"track-highlight",children:Object(a.jsx)(Q,{})})]})]});function u(){return(u=Object(p.a)(h.a.mark((function e(t,n){var a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});case 2:return a=e.sent,e.next=5,a.json();case 5:c=e.sent,n(c.items);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},ae=function(e){return Object(a.jsx)("div",{className:"index-window screen",children:Object(a.jsxs)("div",{className:"index-window-cont",children:[Object(a.jsx)("h1",{children:"Spotify album magazine"}),Object(a.jsx)("p",{children:'This is a website developed with react to increase my skills as developer. It uses many advanced react features. You can browse categories and their associated playlists. From each playlist you can see all tracks and their related albums. You can add these items to the "shop" that I have created. Naturally I do not have database set up, so I will simply store items into your session storage to simulate eCommerce.'}),Object(a.jsx)(k.b,{to:"/main",children:Object(a.jsx)("button",{children:"Continue"})})]})})},ce=function(e){var t=Object(J.g)().id,n=Object(c.useContext)(E),r=n.addItem,s=Object(c.useState)(0),i=Object(O.a)(s,2),o=i[0],u=i[1],d=Object(c.useState)({image:"",label:"",name:""}),j=Object(O.a)(d,2),l=j[0],b=j[1];return Object(c.useEffect)((function(){!function(e,t){f.apply(this,arguments)}(t,b)}),[t]),Object(a.jsx)("div",{className:"album-screen",children:Object(a.jsx)("div",{className:"album-cont",children:Object(a.jsxs)("div",{className:"album-item",children:[Object(a.jsxs)("div",{className:"album-info",children:[Object(a.jsx)("h1",{children:l.label}),Object(a.jsx)("h2",{children:l.name}),Object(a.jsxs)("h3",{children:["Currently: ",o]}),Object(a.jsx)("button",{onClick:function(){r(l,u)},children:"Add to cart"}),Object(a.jsx)("button",{onClick:function(){n.removeItem(l,u)},children:"Remove from cart"})]}),Object(a.jsx)("div",{className:"album-pic",children:Object(a.jsx)("img",{src:l.image})})]})})});function f(){return(f=Object(p.a)(h.a.mark((function e(t,n){var a,c,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){var t=JSON.parse(sessionStorage.getItem("shop"));null!=t&&void 0!=t[e]&&u(t[e].length)},e.next=3,fetch("https://api.spotify.com/v1/albums/".concat(t),{method:"GET",headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,r={image:c.images[0].url,label:c.label,name:c.name,id:c.id},n(r),s(c.id);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},re=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(k.a,{basename:"process.env.PUBLIC_URL",children:Object(a.jsx)(v,{children:Object(a.jsx)(y,{children:Object(a.jsxs)(A,{children:[Object(a.jsx)(R,{}),Object(a.jsxs)(J.c,{children:[Object(a.jsx)(J.a,{exact:!0,path:"/",component:ae}),Object(a.jsx)(J.a,{exact:!0,path:"/main",component:C}),Object(a.jsx)(J.a,{path:"/shop",component:P}),Object(a.jsx)(J.a,{path:"/categories/:id",render:function(e){return Object(a.jsx)(_,{data:e})}}),Object(a.jsx)(J.a,{path:"/playlists/:id",render:function(e){return Object(a.jsx)(ne,{data:e})}}),Object(a.jsx)(J.a,{path:"/album/:id",render:function(e){return Object(a.jsx)(ce,{data:e})}})]})]})})})})})}}]),n}(c.Component);i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(re,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.44b84f11.chunk.js.map